---
title: "Clase FL"
author: "Alejandra María Esteban"
date: "6/12/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
## CAso de estudio del repatidor de frutos de mar

### Antecedetes

bla
bla

### Método AHP (desarrollado por María) <- borrar paréntesis al terminar

Hu, Y., Zhang, K., Yang, J., & Wu, Y. (2018). Application of hierarchical facility location-routing problem with optimization of an underground logistic system: a case study in China. Mathematical Problems in Engineering, 2018.



## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
rm(list=ls())
```


```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=TRUE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

Todos los archivos que manejen debería tenerlos guardados en la siguiente carpeta:
```{r}
getwd()
```

## Cómo incrustar un gráfico

![Figura 1 Clase del 2 de diciembre](img/Triangulo.PNG)

## Cómo asignar valor a una variable

```{r}
altura <- 1.68
peso <- 78
```

Cálculo del indice de masa corporal

```{r}
imc <- peso/(altura)^2
imc
```
## Crear variables de tipo alfabético

```{r}
personas <- list("Juan","Pedro","Maria","30","años")
```

## Cómo extraer datos de una lista

```{r}
personas[2]
```
## Cómo extraer más de un dato de una lista
```{r}
personas[2:5]
```
```{r}
personas[-(2:4)]
```
## Ejercicio resuelto

**4.1.5 Ejercicio**
Sean Los puntos:


$$A (−32.92713427858885,−68.81772766801757)$$
$$B (−32.86788086975811,−68.85428072392608)$$
**Determinar:**

- La Distancia Euclídea

- La Distancia Manhatam

- Representación geomática

- ¿Que ruta elegirías para llegar desde A hasta B?

**Solución:**

Definición Distancia Euclídea 

$$ D=\sqrt{(a^2+b^2)} $$
donde: 
$$ a^2 = (x_2 - x_1 )^2$$
$$ b^2 = (y_2 - y_1 )^2$$
También nos podemos robar la ecuación de Wikipedia

Two dimensions
In the Euclidean plane, let point $p$ have Cartesian coordinates {\displaystyle (p_{1},p_{2})}(p_{1},p_{2}) and let point {\displaystyle q}q have coordinates {\displaystyle (q_{1},q_{2})}(q_{1},q_{2}). Then the distance between {\displaystyle p}p and {\displaystyle q}q is given by:[2]

$${\displaystyle d(p,q)={\sqrt {(q_{1}-p_{1})^{2}+(q_{2}-p_{2})^{2}}}}$$
This can be seen by applying the Pythagorean theorem to a right triangle with horizontal and vertical sides, having the line segment from {\displaystyle p}p to {\displaystyle q}q as its hypotenuse. The two squared formulas inside the square root give the areas of squares on the horizontal and vertical sides, and the outer square root converts the area of the square on the hypotenuse into the length of the hypotenuse.[3]
It is also possible to compute the distance for points given by polar coordinates. If the polar coordinates of {\displaystyle p}p are {\displaystyle (r,\theta )}(r,\theta ) and the polar coordinates of {\displaystyle q}q are {\displaystyle (s,\psi )}{\displaystyle (s,\psi )}, then their distance is[2] given by the law of cosines:


**Cálculo de la Distancia Euclídea**

```{r}
A <- c(-32.92713427858885, -68.81772766801757)
B <- c(-32.86788086975811, -68.85428072392608)
Dy2 <- (A[1]-B[1])^2
Dx2 <- (A[2]-B[2])^2
D_g <- sqrt(Dy2 + Dx2)
D_g
```

Sabemos que 1° de latitud o longitud equivalen sobre el geoide a 111.11 Km por lo tanto la distancia en Km de este arco será:

![Figura 2 Clase del 2 de diciembre](img/EquivalenciaLongKm.PNG)


```{r}
D_km <- 111.11 *D_g /1
D_km
```
**Definición Distancia Manhattan**


$${\displaystyle d_{1}(\mathbf {p} ,\mathbf {q} )=\|\mathbf {p} -\mathbf {q} \|_{1}=\sum _{i=1}^{n}|p_{i}-q_{i}|,}$$

donde 

$${\displaystyle \mathbf {p} =(p_{1},p_{2},\dots ,p_{n})\,}$$
y 
$${\displaystyle \mathbf {q} =(q_{1},q_{2},\dots ,q_{n})\,}$$
**Cálculo Distancia Manhattan**
```{r}
Dy <- (A[1]-B[1])
Dx <- (A[2]-B[2])

D_h <- abs(Dx) + abs(Dy)
D_h
```
Distancia en km
```{r}
D_h <- 111.11 * D_h
D_h
```
*Representación Geomática*

**Cluster de Puntos**
```{r}
if (!require('leaflet')) install.packages('leaflet'); library('leaflet')
if (!require('leaflet.extras')) install.packages('leaflet.extras'); library('leaflet.extras')
if (!require('tidyverse')) install.packages('tidyverse'); library('tidyverse')
```
```{r}
consumo <- c(-32.91682953269615, -68.76609482656337, -200, -20,  -32.92721825526954, -68.81768957684899,3 , 1 , -32.911401355733354, -68.82484400346665 , 5 ,4, -32.89442568503209, -68.83059940148742, 1,6, -32.892425579377154, -68.83308860323564 ,5 ,2, -32.896226807794974, -68.82193031473983 ,2,8 , -32.89855141165897, -68.80510778757831 ,4 , 4, -32.867593934431554, -68.85439436934425 ,3,2 , -32.872045010628426, -68.86456858203749 ,3,8 , -32.91498350785812, -68.84497345198642 ,1,5 , -32.92790119153266, -68.85940216631148 ,5,8 , -32.89427179600652, -68.7997089938368 ,2 ,4  )

consumo_matrix <- matrix(consumo,ncol=4, byrow = TRUE)
colnames(consumo_matrix) <- c("Lat","Lng","Pallets","Semanas")
consumo_matrix
```

```{r}
mision <- data.frame(lat=consumo_matrix[ ,1], long=consumo_matrix[ ,2], pallets=consumo_matrix[ ,3],semanas=consumo_matrix[ ,4],stringsAsFactors=FALSE)


leaflet(data = mision) %>%  addTiles() %>% addMarkers(clusterOptions = markerClusterOptions())
```




